{"version":3,"sources":["components/shared/Sidebar.jsx","components/shared/PendingPosts.jsx","components/Dashboard.jsx"],"names":["Sidebar","data","cancelIcon","closeMenu","history","useHistory","className","style","width","height","zIndex","id","Image","src","cursor","onClick","marginTop","href","role","e","preventDefault","document","cookie","split","forEach","push","axios","require","PendingPosts","userData","useState","posts","setPosts","postsError","setPostsError","postSuggestion","setPostSuggestion","useEffect","get","then","response","status","reverse","filter","post","pending","currentPost","setCurrentPost","showModal","setShowModal","handleClose","loading","setLoading","Modal","show","onHide","centered","size","Header","closeButton","Title","Body","Button","variant","title","body","type","featuredImage","featuredDesc","createdBy","audio","programmeDate","postData","_id","singlePost","console","log","catch","err","Form","onSubmit","suggestion","dataObj","notifications","user","slice","Group","controlId","Control","placeholder","required","value","onChange","target","map","index","rounded","fontSize","Loader","lazy","Posts","NewPost","AirProgrammes","Comments","ForDash","Profile","Users","Dashboard","userId","setUserData","showMenu","setShowMenu","desktopView","useMediaQuery","query","comments","length","cookieString","popover","Popover","notification","sm","paddingLeft","Container","fluid","outline","OverlayTrigger","trigger","placement","overlay","onExited","avatar","roundedCircle","Row","Col","lg","fallback","path","exact","component","minHeight","postIndex","comment","color","name"],"mappings":"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","file":"static/js/28.9da86a1c.chunk.js","sourcesContent":["import Image from \"react-bootstrap/Image\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Sidebar = ({ data, cancelIcon, closeMenu }) => {\r\n  const history = useHistory();\r\n  const logoutHandler = (e) => {\r\n    e.preventDefault();\r\n    document.cookie.split(\";\").forEach((cookie) => {\r\n      let cookieString = cookie.split(\"=\");\r\n      if (cookieString[0] === \"uid\") {\r\n        document.cookie = `uid=;expires==Thu, 01 Jan 1970 00:00:00 GMT;path=/;`;\r\n        history.push(\"/df-login\");\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <aside\r\n      className=\"position-fixed shadow top-0 start-0 bg-white overflow-hidden\"\r\n      style={{ width: \"230px\", height: \"100vh\", zIndex: \"10\" }}\r\n      id=\"sidebar\"\r\n    >\r\n      <div className=\"d-flex m-4 align-items-center\">\r\n        <Image src=\"/media/icon.png\" className=\"me-2\" />\r\n        <h5 className=\"fw-bolder\">DiamondFM</h5>\r\n        {cancelIcon && (\r\n          <i\r\n            className=\"bi bi-x-lg ms-2 fw-bolder h4\"\r\n            style={{ cursor: \"pointer\" }}\r\n            onClick={() => {\r\n              closeMenu();\r\n            }}\r\n          ></i>\r\n        )}\r\n      </div>\r\n\r\n      <nav className=\"ms-5\" style={{ marginTop: \"60%\" }}>\r\n        <div className=\"d-flex my-2 align-items-center\">\r\n          <i className=\"bi bi-house me-2 fw-bolder h4\"></i>\r\n          <a href=\"/df-dashboard\" className=\"fw-bold text-decoration-none\">\r\n            Dash\r\n          </a>\r\n        </div>\r\n\r\n        <div className=\"d-flex my-2 align-items-center\">\r\n          <i className=\"bi bi-file-text me-2 fw-bolder h4\"></i>\r\n          <a\r\n            href=\"/df-dashboard/posts\"\r\n            className=\"fw-bold text-decoration-none\"\r\n          >\r\n            Posts\r\n          </a>\r\n        </div>\r\n\r\n        <div className=\"d-flex my-2 align-items-center\">\r\n          <i className=\"bi bi-mic me-2 fw-bolder h4\"></i>\r\n          <a\r\n            href=\"/df-dashboard/programme\"\r\n            className=\"fw-bold text-decoration-none\"\r\n          >\r\n            Air Programme\r\n          </a>\r\n        </div>\r\n\r\n        <div className=\"d-flex my-2 align-items-center\">\r\n          <i className=\"bi bi-chat-left-text me-2 fw-bolder h4\"></i>\r\n          <a\r\n            href=\"/df-dashboard/comments\"\r\n            className=\"fw-bold text-decoration-none\"\r\n          >\r\n            Comments\r\n          </a>\r\n        </div>\r\n\r\n        {data.role === \"admin\" && (\r\n          <div className=\"d-flex my-2 align-items-center\">\r\n            <i className=\"bi bi-people me-2 fw-bolder h4\"></i>\r\n            <a\r\n              href=\"/df-dashboard/users\"\r\n              className=\"fw-bold text-decoration-none\"\r\n            >\r\n              Users\r\n            </a>\r\n          </div>\r\n        )}\r\n      </nav>\r\n\r\n      <section className=\"ms-5\" style={{ marginTop: \"30%\" }}>\r\n        <div className=\"d-flex my-2 align-items-center\">\r\n          <i className=\"bi bi-box-arrow-left me-2 fw-bolder h4\"></i>\r\n          <a\r\n            href=\"/\"\r\n            className=\"fw-bold text-decoration-none\"\r\n            onClick={logoutHandler}\r\n          >\r\n            Logout\r\n          </a>\r\n        </div>\r\n\r\n        <a href=\"/df-dashboard/create-post\" className=\"btn btn-info text-white\">\r\n          NEW POST\r\n        </a>\r\n      </section>\r\n    </aside>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","import { useEffect, useState } from \"react\";\r\nimport Image from \"react-bootstrap/Image\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Form from \"react-bootstrap/Form\";\r\nconst axios = require(\"axios\");\r\n\r\nconst PendingPosts = ({ userData }) => {\r\n  const [posts, setPosts] = useState(null);\r\n  const [postsError, setPostsError] = useState(null);\r\n  const [postSuggestion, setPostSuggestion] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    axios.get(\"/posts\").then((response) => {\r\n      if (!response.data) {\r\n        setPostsError(\"Error getting posts\");\r\n      } else if (!response.data.status) {\r\n        setPostsError(\"No post created yet... Add new\");\r\n      } else {\r\n        setPosts(\r\n          response.data.posts.reverse().filter((post) => post.pending === true)\r\n        );\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const [currentPost, setCurrentPost] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const handleClose = () => setShowModal(false);\r\n  const handleShow = () => setShowModal(true);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const approvePostHandler = () => {\r\n    setLoading(true);\r\n    const {\r\n      title,\r\n      body,\r\n      type,\r\n      featuredImage,\r\n      featuredDesc,\r\n      createdBy,\r\n      audio,\r\n      programmeDate,\r\n    } = currentPost;\r\n\r\n    const postData = {\r\n      id: currentPost._id,\r\n      pending: false,\r\n      title,\r\n      body,\r\n      type,\r\n      featuredImage,\r\n      featuredDesc,\r\n      createdBy,\r\n      audio,\r\n      programmeDate,\r\n    };\r\n\r\n    axios\r\n      .post(\"/posts/update\", postData)\r\n      .then((response) => {\r\n        if (response.data && response.data.status) {\r\n          // TODO Be sure posts get updated\r\n          setPosts(\r\n            posts.filter((singlePost) => singlePost._id !== currentPost._id)\r\n          );\r\n          handleClose();\r\n        } else {\r\n          console.log(\"Oops.. error updating post\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  const submitHandler = (e) => {\r\n    setLoading(true);\r\n    e.preventDefault();\r\n    const {\r\n      title,\r\n      body,\r\n      type,\r\n      featuredImage,\r\n      featuredDesc,\r\n      createdBy,\r\n      audio,\r\n      programmeDate,\r\n      pending,\r\n    } = currentPost;\r\n\r\n    const postData = {\r\n      id: currentPost._id,\r\n      pending,\r\n      title,\r\n      body,\r\n      type,\r\n      featuredImage,\r\n      featuredDesc,\r\n      createdBy,\r\n      audio,\r\n      programmeDate,\r\n      suggestion: postSuggestion,\r\n    };\r\n\r\n    axios\r\n      .post(\"/posts/update\", postData)\r\n      .then((response) => {\r\n        if (response.data && response.data.status) {\r\n          handleClose();\r\n\r\n          //TODO Notify creator of suggestion\r\n          axios.get(`/users/${currentPost.createdBy}`).then((response) => {\r\n            let dataObj = {\r\n              id: currentPost.createdBy,\r\n              notifications: [\r\n                ...response.data.user.notifications,\r\n                {\r\n                  type: \"Changes suggested\",\r\n                  body: featuredDesc.slice(0, 25),\r\n                },\r\n              ],\r\n            };\r\n\r\n            axios\r\n              .post(\"/users/notify\", dataObj)\r\n              .then((response) => console.log(response.data))\r\n              .catch((err) => console.log(err));\r\n          });\r\n        } else {\r\n          console.log(\"Oops.. error updating post\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    // TODO: update the post with suggestion and notify creator\r\n  };\r\n  return (\r\n    <div>\r\n      <Modal show={showModal} onHide={handleClose} centered size=\"lg\">\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Post Approval</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div className=\"my-2\">\r\n            <p className=\"mb-1 fw-bold\">Approve and Publish</p>\r\n            <Button variant=\"success\" onClick={approvePostHandler}>\r\n              {loading ? \"Loading...\" : \"Publish Now\"}\r\n            </Button>\r\n          </div>\r\n\r\n          <div>\r\n            <p className=\"mb-1 fw-bold\">Naah! suggest changes</p>\r\n            <Form onSubmit={submitHandler}>\r\n              <div className=\"d-flex flex-nowrap\">\r\n                <Form.Group controlId=\"postSuggestion\">\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    placeholder=\"Type here...\"\r\n                    required={true}\r\n                    value={postSuggestion}\r\n                    onChange={(e) => setPostSuggestion(e.target.value)}\r\n                  />\r\n                </Form.Group>\r\n\r\n                <Button variant=\"danger\" type=\"submit\" className=\"ms-2\">\r\n                  {loading ? \"Loading...\" : \"Notify Editor\"}\r\n                </Button>\r\n              </div>\r\n            </Form>\r\n          </div>\r\n        </Modal.Body>\r\n        {/* <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button variant=\"primary\" onClick={handleClose}>\r\n            Save Changes\r\n          </Button>\r\n        </Modal.Footer> */}\r\n      </Modal>\r\n\r\n      {posts ? (\r\n        <section>\r\n          {posts.map((post, index) => {\r\n            return (\r\n              <section key={index}>\r\n                <div className=\"d-flex align-items-center justify-content-between my-2\">\r\n                  <div className=\"d-flex flex-nowrap align-items-center\">\r\n                    <Image\r\n                      src={post.featuredImage}\r\n                      rounded\r\n                      width=\"80px\"\r\n                      height=\"70px\"\r\n                    />\r\n\r\n                    <section className=\"ms-2\">\r\n                      <p className=\"fw-bold mb-0\">{post.title}</p>\r\n                      <p className=\"mb-0\" style={{ fontSize: \"15px\" }}>\r\n                        {post.featuredDesc.slice(0, 35) + \"...\"}\r\n                      </p>\r\n                    </section>\r\n                  </div>\r\n\r\n                  {userData.role === \"admin\" && (\r\n                    <i\r\n                      className=\"bi bi-exclamation-circle h5 text-secondary\"\r\n                      style={{ cursor: \"pointer\" }}\r\n                      onClick={() => {\r\n                        setCurrentPost(post);\r\n                        handleShow();\r\n                      }}\r\n                    ></i>\r\n                  )}\r\n                </div>\r\n              </section>\r\n            );\r\n          })}\r\n        </section>\r\n      ) : postsError ? (\r\n        <p>No pending post</p>\r\n      ) : (\r\n        \"loading...\"\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PendingPosts;\r\n","import { useEffect, useState, Suspense, lazy } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Image from \"react-bootstrap/Image\";\r\nimport Popover from \"react-bootstrap/Popover\";\r\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\";\r\nimport Sidebar from \"./shared/Sidebar\";\r\nimport PendingPosts from \"./shared/PendingPosts\";\r\nconst axios = require(\"axios\");\r\n\r\nconst Loader = lazy(() => import(\"./shared/Loader\"));\r\nconst Posts = lazy(() => import(\"./shared/Posts\"));\r\nconst NewPost = lazy(() => import(\"./shared/NewPost\"));\r\nconst AirProgrammes = lazy(() => import(\"./shared/AirProgrammes\"));\r\nconst Comments = lazy(() => import(\"./shared/Comments\"));\r\nconst ForDash = lazy(() => import(\"./shared/ForDash\"));\r\nconst Profile = lazy(() => import(\"./shared/Profile\"));\r\nconst Users = lazy(() => import(\"./shared/Users\"));\r\n\r\nconst Dashboard = () => {\r\n  let userId = \"\";\r\n  const history = useHistory();\r\n  const [userData, setUserData] = useState(null);\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const desktopView = useMediaQuery({ query: \"(min-width: 1300px)\" });\r\n\r\n  const [posts, setPosts] = useState(null);\r\n  const [postsError, setPostsError] = useState(null);\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/posts\")\r\n      .then((response) => {\r\n        if (response.data.status) {\r\n          setPosts(\r\n            response.data.posts.filter((post) => post.comments.length > 0)\r\n          );\r\n        } else {\r\n          setPostsError(\"Opps.. no comments on all posts\");\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }, []);\r\n\r\n  const closeMenu = () => {\r\n    setShowMenu(false);\r\n  };\r\n\r\n  document.cookie.split(\";\").forEach((cookie) => {\r\n    const cookieString = cookie.split(\"=\");\r\n    if (cookieString[0] === \"uid\") {\r\n      userId = cookieString[1];\r\n    } else {\r\n      history.push(\"/df-login\");\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    document.title = \"Dashboard | DiamondFM\";\r\n    axios\r\n      .get(`/users/${userId}`)\r\n      .then((response) => {\r\n        if (response.data.status) {\r\n          setUserData(response.data.user);\r\n        } else {\r\n          history.push(\"/df-login\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [userId, history]);\r\n\r\n  const popover = userData && (\r\n    <Popover id=\"popover-basic\" className=\"shadow bg-white border-0 rounded\">\r\n      <Popover.Body>\r\n        {userData.notifications.length > 0 ? (\r\n          <div>\r\n            {userData.notifications.map((notification, index) => {\r\n              return (\r\n                <div key={index}>\r\n                  <p className=\"fw-bold mb-1\">{notification.type}</p>\r\n                  <p>{notification.body}</p>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        ) : (\r\n          <p>You have no notification</p>\r\n        )}\r\n      </Popover.Body>\r\n    </Popover>\r\n  );\r\n\r\n  const clearNotificationAfterView = () => {\r\n    let dataObj = {\r\n      id: userData._id,\r\n      notifications: [],\r\n    };\r\n\r\n    axios\r\n      .post(\"/users/notify\", dataObj)\r\n      .then((response) => {\r\n        axios\r\n          .get(`/users/${userId}`)\r\n          .then((response) => {\r\n            if (response.data.status) {\r\n              setUserData(response.data.user);\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {userData ? (\r\n        <div>\r\n          {showMenu && (\r\n            <Sidebar data={userData} cancelIcon={true} closeMenu={closeMenu} />\r\n          )}\r\n          <section className=\"d-none d-xl-block\">\r\n            <Sidebar data={userData} />\r\n          </section>\r\n\r\n          <main\r\n            sm={10}\r\n            style={{ paddingLeft: desktopView ? \"250px\" : \"0px\" }}\r\n            className=\"mx-2\"\r\n          >\r\n            <Container fluid=\"lg\">\r\n              <header className=\"d-flex flex-nowrap align-items-center py-2 py-lg-3 justify-content-between\">\r\n                <div className=\"d-xl-none me-2\">\r\n                  <i\r\n                    className=\"bi bi-list fw-bolder h3\"\r\n                    style={{ cursor: \"pointer\" }}\r\n                    onClick={() => {\r\n                      setShowMenu(true);\r\n                    }}\r\n                  ></i>\r\n                </div>\r\n\r\n                <div\r\n                  className=\"bg-white px-4 py-1 shadow rounded d-flex flex-nowrap align-items-center\"\r\n                  style={{ width: \"100%\" }}\r\n                >\r\n                  <input\r\n                    type=\"text\"\r\n                    style={{ outline: \"none\" }}\r\n                    className=\"w-100 ps-2 border-info border-start-4 border-top-0 border-bottom-0 border-end-0\"\r\n                    placeholder=\"Search\"\r\n                  />\r\n                  <i className=\"bi bi-search fw-bolder h4 pe-2 d-none d-md-block\"></i>\r\n                </div>\r\n\r\n                <OverlayTrigger\r\n                  trigger=\"click\"\r\n                  placement=\"bottom\"\r\n                  overlay={popover}\r\n                  onExited={clearNotificationAfterView}\r\n                >\r\n                  <div\r\n                    style={{ cursor: \"pointer\" }}\r\n                    className=\"py-1 px-2 px-md-3 py-md-2 shadow bg-white rounded mx-1 mx-md-4 position-relative\"\r\n                  >\r\n                    {userData.notifications.length > 0 && (\r\n                      <span className=\"position-absolute top-0 start-100 translate-middle p-1 p-md-2 bg-danger border border-0 rounded-circle\"></span>\r\n                    )}\r\n                    <i className=\"bi bi-bell-fill fw-bolder fs-6 fs-md-0 h-md-4\"></i>\r\n                  </div>\r\n                </OverlayTrigger>\r\n\r\n                <div className=\"ms-2\">\r\n                  <a href=\"/df-dashboard/profile\">\r\n                    <Image\r\n                      src={\r\n                        userData.avatar !== \"null\"\r\n                          ? userData.avatar\r\n                          : \"/media/defaultAvatar.png\"\r\n                      }\r\n                      roundedCircle\r\n                      style={{ height: \"45px\", width: \"45px\" }}\r\n                    />\r\n                  </a>\r\n                </div>\r\n              </header>\r\n            </Container>\r\n\r\n            <Container fluid=\"lg\">\r\n              <Row>\r\n                <Col lg={8}>\r\n                  <Router>\r\n                    <Suspense fallback={<Loader />}>\r\n                      <Switch>\r\n                        <Route path=\"/df-dashboard\" exact component={ForDash} />\r\n                        <Route path=\"/df-dashboard/posts\" component={Posts} />\r\n                        <Route\r\n                          path=\"/df-dashboard/profile\"\r\n                          component={Profile}\r\n                        />\r\n                        <Route\r\n                          path=\"/df-dashboard/programme\"\r\n                          component={AirProgrammes}\r\n                        />\r\n                        <Route\r\n                          path=\"/df-dashboard/create-post\"\r\n                          component={NewPost}\r\n                        />\r\n                        <Route\r\n                          path=\"/df-dashboard/comments\"\r\n                          component={Comments}\r\n                        />\r\n                        <Route path=\"/df-dashboard/users\" component={Users} />\r\n                      </Switch>\r\n                    </Suspense>\r\n                  </Router>\r\n                </Col>\r\n                <Col>\r\n                  <section\r\n                    style={{ minHeight: \"80px\" }}\r\n                    className=\"bg-white px-3 py-4 ms-md-2 my-3 rounded-3 shadow\"\r\n                  >\r\n                    <h4 className=\"mb-3\">Recent Comments</h4>\r\n                    {posts ? (\r\n                      <section>\r\n                        {posts.map((singlePost, postIndex) =>\r\n                          singlePost.comments.map((comment, index) => {\r\n                            return (\r\n                              <section key={postIndex}>\r\n                                <p>\r\n                                  <span style={{ color: \"#FB9195\" }}>\r\n                                    {comment.name}\r\n                                  </span>{\" \"}\r\n                                  <span className=\"text-secondary\">\r\n                                    Commented\r\n                                  </span>{\" \"}\r\n                                  {comment.body}\r\n                                </p>\r\n                              </section>\r\n                            );\r\n                          })\r\n                        )}\r\n                      </section>\r\n                    ) : postsError ? (\r\n                      { postsError }\r\n                    ) : (\r\n                      \"Loading...\"\r\n                    )}\r\n                  </section>\r\n\r\n                  <section\r\n                    style={{ minHeight: \"80px\" }}\r\n                    className=\"bg-white px-3 py-4 ms-md-2 my-4 rounded shadow\"\r\n                  >\r\n                    <h4 className=\"mb-3\">\r\n                      Pending {userData.role === \"admin\" ? \"Posts\" : \"Approval\"}\r\n                    </h4>\r\n                    <PendingPosts userData={userData} />\r\n                  </section>\r\n                </Col>\r\n              </Row>\r\n            </Container>\r\n          </main>\r\n        </div>\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"sourceRoot":""}