(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[20],{439:function(e,t,n){"use strict";n.r(t);var a=n(70),c=n(39),s=n(0),i=n(45),r=n(18),l=n(1),o=n(43);t.default=function(){var e=Object(s.useState)(null),t=Object(c.a)(e,2),n=t[0],d=t[1],b=Object(s.useState)(null),j=Object(c.a)(b,2),u=j[0],m=j[1],f=Object(s.useState)(null),O=Object(c.a)(f,2),h=O[0],p=O[1],x=Object(s.useState)(null),g=Object(c.a)(x,2),y=g[0],v=g[1];Object(s.useEffect)((function(){o.get("/posts").then((function(e){e.data.status?d(e.data.posts.filter((function(e){return e.comments.length>0}))):m("Opps.. no comments on all posts")})).catch((function(e){return console.log(e)}))}),[]);return Object(l.jsxs)("div",{children:[u&&Object(l.jsx)(i.a,{variant:"warning",children:u}),h||y?Object(l.jsx)(i.a,{variant:"success",className:"mt-5",children:h?h+" APPROVED":y?"Comment deleted":null}):null,n?Object(l.jsxs)("table",{className:"table my-5",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{className:"d-none d-md-table-cell",children:"No"}),Object(l.jsx)("th",{children:"Comments"}),Object(l.jsx)("th",{className:"d-none d-md-table-cell",children:"Name"}),Object(l.jsx)("th",{className:"d-none d-md-table-cell",children:"Email"}),Object(l.jsx)("th",{children:"Edit"})]})}),Object(l.jsx)("tbody",{children:n.map((function(e,t){return e.comments.map((function(c,s){return Object(l.jsxs)("tr",{className:"my-5",children:[Object(l.jsx)("td",{className:"d-none d-md-table-cell",children:Object(l.jsx)("span",{className:"px-3 py-1 bg-info rounded text-white",children:t+1})}),Object(l.jsx)("td",{children:Object(l.jsxs)("div",{className:"d-flex align-items-center",children:[Object(l.jsx)("i",{className:"bi bi-person-circle fw-bolder text-secondary h3"}),Object(l.jsx)("section",{className:"ms-2",children:Object(l.jsx)("p",{className:"mb-0",children:c.body.slice(0,60)+"..."})})]})}),Object(l.jsx)("td",{className:"d-none d-md-table-cell",children:Object(l.jsx)("p",{children:c.name})}),Object(l.jsx)("td",{className:"d-none d-md-table-cell",children:Object(l.jsx)("p",{children:c.email})}),Object(l.jsx)("td",{children:Object(l.jsxs)("div",{className:"d-flex flex-nowrap align-items-center justify-content-center",children:[Object(l.jsx)("i",{className:"bi bi-check2-square fw-bolder h5",style:{cursor:"pointer"},onClick:function(){!function(e,t,n){var c=e.title,s=e.body,i=e.type,r=e.featuredImage,l=e.featuredDesc,d=e.createdBy,b=e.audio,j=e.programmeDate,u=e.pending,m=e.suggestion,f=e.comments,O=f.filter((function(e){return e._id!==t})),h=f.filter((function(e){return e._id=t}))[0];h.approved=!0;var x={id:e._id,title:c,body:s,type:i,featuredImage:r,featuredDesc:l,createdBy:d,audio:b,programmeDate:j,pending:u,suggestion:m,comments:[].concat(Object(a.a)(O),[h])};o.post("/posts/update",x).then((function(e){e.data.status?p(n.slice(0,15)+"..."):console.log(e.data)}))}(e,c._id,c.body)}}),Object(l.jsx)("span",{style:{backgroundColor:"#FB9195",cursor:"pointer"},className:"rounded ms-1 p-1",children:Object(l.jsx)("i",{className:"bi bi-trash fw-bolder text-white h5",onClick:function(){!function(e,t){d(n.filter((function(t){return t!==e})));var c=e.title,s=e.body,i=e.type,r=e.featuredImage,l=e.featuredDesc,b=e.createdBy,j=e.audio,u=e.programmeDate,m=e.pending,f=e.suggestion,O=e.comments.filter((function(e){return e._id!==t})),h={id:e._id,title:c,body:s,type:i,featuredImage:r,featuredDesc:l,createdBy:b,audio:j,programmeDate:u,pending:m,suggestion:f,comments:Object(a.a)(O)};o.post("/posts/update",h).then((function(e){e.data.status?v(!0):console.log(e.data)}))}(e,c._id)}})})]})})]},t)}))}))})]}):Object(l.jsx)(r.default,{})]})}},45:function(e,t,n){"use strict";var a=n(7),c=n(10),s=n(11),i=n.n(s),r=n(0),l=n(65),o=n(62),d=n(60),b=n(12),j=n(66),u=n(75),m=n(71),f=n(48),O=n(1),h=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],p=Object(m.a)("h4");p.displayName="DivStyledAsH4";var x=Object(f.a)("alert-heading",{Component:p}),g=Object(f.a)("alert-link",{Component:d.a}),y={variant:"primary",show:!0,transition:j.a,closeLabel:"Close alert"},v=r.forwardRef((function(e,t){var n=Object(l.a)(e,{show:"onClose"}),s=n.bsPrefix,r=n.show,d=n.closeLabel,m=n.closeVariant,f=n.className,p=n.children,x=n.variant,g=n.onClose,y=n.dismissible,v=n.transition,N=Object(c.a)(n,h),w=Object(b.a)(s,"alert"),D=Object(o.a)((function(e){g&&g(!1,e)})),C=!0===v?j.a:v,k=Object(O.jsxs)("div",Object(a.a)(Object(a.a)({role:"alert"},C?void 0:N),{},{ref:t,className:i()(f,w,x&&"".concat(w,"-").concat(x),y&&"".concat(w,"-dismissible")),children:[y&&Object(O.jsx)(u.a,{onClick:D,"aria-label":d,variant:m}),p]}));return C?Object(O.jsx)(C,Object(a.a)(Object(a.a)({unmountOnExit:!0},N),{},{ref:void 0,in:r,children:k})):r?k:null}));v.displayName="Alert",v.defaultProps=y,t.a=Object.assign(v,{Link:g,Heading:x})},60:function(e,t,n){"use strict";var a=n(39),c=n(0),s=(n(58),n(47),n(49));n(54),n(59);n(63),new WeakMap;var i=n(64),r=n(1),l=["onKeyDown"];var o=c.forwardRef((function(e,t){var n,c=e.onKeyDown,o=function(e,t){if(null==e)return{};var n,a,c={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,l),d=Object(i.b)(Object.assign({tagName:"a"},o)),b=Object(a.a)(d,1)[0],j=Object(s.a)((function(e){b.onKeyDown(e),null==c||c(e)}));return((n=o.href)&&"#"!==n.trim()||o.role)&&"button"!==o.role?Object(r.jsx)("a",Object.assign({ref:t},o,{onKeyDown:c})):Object(r.jsx)("a",Object.assign({ref:t},o,b,{onKeyDown:j}))}));o.displayName="Anchor";t.a=o},63:function(e,t,n){"use strict";(function(e){var a=n(0),c="undefined"!==typeof e&&e.navigator&&"ReactNative"===e.navigator.product,s="undefined"!==typeof document;t.a=s||c?a.useLayoutEffect:a.useEffect}).call(this,n(25))}}]);
//# sourceMappingURL=20.22782980.chunk.js.map