(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[20,25,27],{193:function(e,t,a){"use strict";a.r(t);var c=a(39),s=a(0),n=a(41),r=a(45),l=a(76),i=a(52),d=a(18),o=a(83),j=a(1),b=a(43);t.default=function(e){var t=e.postLimit,a=Object(s.useState)(null),u=Object(c.a)(a,2),m=u[0],h=u[1],O=Object(s.useState)(null),p=Object(c.a)(O,2),x=p[0],f=p[1],g=Object(s.useState)(!1),N=Object(c.a)(g,2),y=N[0],v=N[1],w=Object(s.useState)(!1),S=Object(c.a)(w,2),C=S[0],P=S[1],D=Object(s.useState)(""),k=Object(c.a)(D,2),I=k[0],T=k[1],L=function(){return P(!1)},E=Object(s.useState)(null),A=Object(c.a)(E,2),B=A[0],F=A[1];return Object(s.useEffect)((function(){b.get("/posts").then((function(e){e.data?e.data.status?h(t?e.data.posts.reverse().filter((function(e){return"airProgramme"!==e.type})).slice(0,t):e.data.posts.reverse().filter((function(e){return"airProgramme"!==e.type}))):f("No post created yet... Add new"):f("Error getting posts")}))}),[t]),Object(j.jsxs)("div",{children:[Object(j.jsxs)(l.a,{show:C,onHide:L,children:[Object(j.jsx)(l.a.Header,{closeButton:!0,children:Object(j.jsx)(l.a.Title,{children:"Delete Post"})}),Object(j.jsx)(l.a.Body,{children:"Woohoo, Do you want to delete post?"}),Object(j.jsxs)(l.a.Footer,{children:[Object(j.jsx)(i.a,{variant:"secondary",onClick:L,children:"Not at all"}),Object(j.jsx)(i.a,{variant:"danger",onClick:function(){return e=I,v(!0),b.delete("/posts/".concat(e)).then((function(e){b.get("/posts").then((function(e){e.data?e.data.status?(v(!1),h(t?e.data.posts.reverse().filter((function(e){return"airProgramme"!==e.type})).slice(0,t):e.data.posts.reverse().filter((function(e){return"airProgramme"!==e.type})))):f("No post created yet... Add new"):f("Error getting posts")}))})).catch((function(e){return console.log(e)})),void L();var e},children:"Yes, delete post"})]})]}),m&&!B?Object(j.jsxs)("section",{style:{minHeight:"80px"},className:"bg-white px-3 py-4 me-md-2 my-3 rounded-3 shadow",children:[Object(j.jsx)("h4",{children:"Recent Posts"}),y&&Object(j.jsx)(d.default,{}),Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"No"}),Object(j.jsx)("th",{children:"Post Title"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"Type"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"Date"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:Object(j.jsx)("i",{className:"bi bi-chat-left-text me-2 fw-bolder h4"})}),Object(j.jsx)("th",{children:"Edit"})]})}),Object(j.jsx)("tbody",{children:m.map((function(e,t){return Object(j.jsxs)("tr",{className:"my-5",children:[Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("span",{className:"px-3 py-1 bg-info rounded text-white",children:t+1})}),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)(n.a,{src:e.featuredImage,rounded:!0,width:"80px",height:"70px",className:"d-none d-md-block"}),Object(j.jsxs)("section",{className:"ms-2",children:[Object(j.jsx)("p",{className:"fw-bold mb-0",children:e.title.slice(0,20)+"..."}),Object(j.jsx)("p",{className:"mb-0",children:e.featuredDesc.slice(0,40)+"..."})]})]})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.type})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.createdAt.split("T")[0]})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.comments.length})}),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"d-flex flex-nowrap align-items-center justify-content-center",children:[Object(j.jsx)("i",{className:"bi bi-pencil-square fw-bolder h5",style:{cursor:"pointer"},onClick:function(){!function(e){F(e)}(e)}}),Object(j.jsx)("span",{style:{backgroundColor:"#FB9195",cursor:"pointer"},className:"rounded ms-1 p-1",children:Object(j.jsx)("i",{className:"bi bi-trash fw-bolder text-white h5",onClick:function(){T(e._id),P(!0)}})})]})})]},e._id)}))})]})]}):x?Object(j.jsx)(r.a,{variant:"warning",children:x}):B?Object(j.jsx)(o.a,{post:B}):Object(j.jsx)(d.default,{})]})}},224:function(e,t,a){"use strict";a.r(t);var c=a(39),s=a(0),n=a(41),r=a(45),l=a(76),i=a(52),d=a(18),o=a(83),j=a(1),b=a(43);t.default=function(e){var t=e.postLimit,a=Object(s.useState)(null),u=Object(c.a)(a,2),m=u[0],h=u[1],O=Object(s.useState)(null),p=Object(c.a)(O,2),x=p[0],f=p[1],g=Object(s.useState)(!1),N=Object(c.a)(g,2),y=N[0],v=N[1],w=Object(s.useState)(!1),S=Object(c.a)(w,2),C=S[0],P=S[1],D=Object(s.useState)(""),k=Object(c.a)(D,2),I=k[0],T=k[1],L=function(){return P(!1)},E=Object(s.useState)(null),A=Object(c.a)(E,2),B=A[0],F=A[1];return Object(s.useEffect)((function(){b.get("/posts").then((function(e){e.data?e.data.status?h(t?e.data.posts.reverse().filter((function(e){return"airProgramme"===e.type})).slice(0,t):e.data.posts.reverse().filter((function(e){return"airProgramme"===e.type}))):f("No post created yet... Add new"):f("Error getting posts")}))}),[t]),Object(j.jsxs)("div",{children:[Object(j.jsxs)(l.a,{show:C,onHide:L,children:[Object(j.jsx)(l.a.Header,{closeButton:!0,children:Object(j.jsx)(l.a.Title,{children:"Delete Programme"})}),Object(j.jsx)(l.a.Body,{children:"Woohoo, Do you want to delete programme?"}),Object(j.jsxs)(l.a.Footer,{children:[Object(j.jsx)(i.a,{variant:"secondary",onClick:L,children:"Not at all"}),Object(j.jsx)(i.a,{variant:"danger",onClick:function(){return e=I,v(!0),b.delete("/posts/".concat(e)).then((function(e){b.get("/posts").then((function(e){e.data?e.data.status?(v(!1),h(t?e.data.posts.reverse().filter((function(e){return"airProgramme"===e.type})).slice(0,t):e.data.posts.reverse().filter((function(e){return"airProgramme"===e.type})))):f("No post created yet... Add new"):f("Error getting posts")}))})).catch((function(e){return console.log(e)})),void L();var e},children:"Yes, delete post"})]})]}),m&&!B?Object(j.jsxs)("section",{style:{minHeight:"80px"},className:"bg-white px-3 py-4 me-md-2 my-3 rounded-3 shadow",children:[Object(j.jsx)("h4",{children:"Recent Programme"}),y&&Object(j.jsx)(d.default,{}),Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"No"}),Object(j.jsx)("th",{children:"Programme Title"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"Time"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"Date"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:Object(j.jsx)("i",{className:"bi bi-chat-left-text me-2 fw-bolder h4"})}),Object(j.jsx)("th",{children:"Edit"})]})}),Object(j.jsx)("tbody",{children:m.map((function(e,t){return Object(j.jsxs)("tr",{className:"my-5",children:[Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("span",{className:"px-3 py-1 rounded text-white",style:{backgroundColor:"#003A70"},children:t+1})}),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)(n.a,{src:e.featuredImage,rounded:!0,width:"80px",height:"70px",className:"d-none d-md-block"}),Object(j.jsxs)("section",{className:"ms-2",children:[Object(j.jsx)("p",{className:"fw-bold mb-0",children:e.title.slice(0,20)+"..."}),Object(j.jsx)("p",{className:"mb-0",children:e.featuredDesc.slice(0,40)+"..."})]})]})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:new Date(e.programmeDate).toLocaleTimeString("en-US")})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.programmeDate.split("T")[0]})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.comments.length})}),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"d-flex flex-nowrap align-items-center justify-content-center",children:[Object(j.jsx)("i",{className:"bi bi-pencil-square fw-bolder h5",style:{cursor:"pointer"},onClick:function(){!function(e){F(e)}(e)}}),Object(j.jsx)("span",{style:{backgroundColor:"#FB9195",cursor:"pointer"},className:"rounded ms-1 p-1",children:Object(j.jsx)("i",{className:"bi bi-trash fw-bolder text-white h5",onClick:function(){T(e._id),P(!0)}})})]})})]},e._id)}))})]})]}):x?Object(j.jsx)(r.a,{variant:"warning",children:x}):B?Object(j.jsx)(o.a,{post:B}):Object(j.jsx)(d.default,{})]})}},435:function(e,t,a){"use strict";a.r(t);var c=a(224),s=a(193),n=a(1);t.default=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(s.default,{postLimit:4}),Object(n.jsx)(c.default,{postLimit:2})]})}},83:function(e,t,a){"use strict";var c=a(70),s=a(39),n=a(111),r=a.n(n),l=(a(121),a(0)),i=a(51),d=a(46),o=a(44),j=a(52),b=a(45),u=a(19),m=a(123),h=a.n(m),O=(a(122),a(1)),p=a(43);t.a=function(e){var t=e.post,a="";document.cookie.split(";").forEach((function(e){var t=e.split("=");"uid"===t[0]&&(a=t[1])}));var n=Object(l.useState)(null),m=Object(s.a)(n,2),x=m[0],f=m[1];Object(l.useEffect)((function(){p.get("/users/".concat(a)).then((function(e){f((function(){return e.data.user}))}))}),[a]);var g=Object(l.useState)(t.createdBy),N=Object(s.a)(g,1)[0],y=Object(l.useState)(t.body),v=Object(s.a)(y,2),w=v[0],S=v[1],C=Object(l.useState)(!1),P=Object(s.a)(C,2),D=P[0],k=P[1],I=Object(l.useState)(t.title),T=Object(s.a)(I,2),L=T[0],E=T[1],A=Object(l.useState)(t.type),B=Object(s.a)(A,2),F=B[0],G=B[1],H=Object(l.useState)(t.featuredImage),q=Object(s.a)(H,2),_=q[0],U=q[1],J=Object(l.useState)(t.audio),R=Object(s.a)(J,2),W=R[0],Y=R[1],z=Object(l.useState)(t.featuredDesc),M=Object(s.a)(z,2),K=M[0],Q=M[1],V=Object(l.useState)(new Date(t.programmeDate)),X=Object(s.a)(V,2),Z=X[0],$=X[1],ee=Object(l.useState)(null),te=Object(s.a)(ee,2),ae=te[0],ce=te[1],se=Object(l.useState)(!1),ne=Object(s.a)(se,2),re=ne[0],le=ne[1],ie=Object(l.useState)(!1),de=Object(s.a)(ie,2),oe=de[0],je=de[1];return Object(l.useEffect)((function(){x&&x&&!x.canPublish&&re&&p.get("/users/").then((function(e){e.data.users.filter((function(e){return"admin"===e.role})).forEach((function(e){var t={id:e._id,notifications:[].concat(Object(c.a)(e.notifications),[{type:"Pending post updated",body:K.slice(0,25)}])};p.post("/users/notify",t).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}))})).catch((function(e){console.log(e)}))}),[x,K,re]),Object(O.jsxs)("div",{className:"bg-white px-1 py-4 me-md-2 my-4",children:[t.suggestion&&Object(O.jsxs)(b.a,{variant:"warning",children:[Object(O.jsx)(b.a.Heading,{children:"Changes suggested by admin"}),t.suggestion]}),re&&!ae&&Object(O.jsx)(b.a,{variant:"success",className:"my-2",children:"Post updated successfully"}),ae&&!re&&Object(O.jsx)(b.a,{variant:"danger",className:"my-2",children:ae}),!re&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h4",{className:"mb-4",children:"Update Post"}),Object(O.jsxs)(i.a,{onSubmit:function(e){var a;if(e.preventDefault(),k(!0),"string"===typeof _){var c=_.split(".");a=c[c.length-1].toLowerCase()}else if("object"===typeof _){var s=_.name.split(".");a=s[s.length-1].toLowerCase()}if("jpg"===a||"jpeg"===a||"png"===a){console.log(a);var n=new FormData;n.append("id",t._id),n.append("featuredImage",_),n.append("title",L),n.append("type",F),n.append("body",w),n.append("audio",""!==W?W:null),n.append("createdBy",N),n.append("featuredDesc",K),n.append("pending",!0!==x.canPublish),n.append("programmeDate",""!==Z?Z:null);p.post("/posts/update",n,{headers:{"content-type":"multipart/form-data"}}).then((function(e){e.data&&e.data.status?le(!0):ce("Oops.. error updating post")})).catch((function(e){console.log(e)})),k(!1)}else je(!0),k(!1),console.log("NOT IMG",a)},children:[Object(O.jsxs)(d.a,{children:[Object(O.jsx)(o.a,{xs:8,children:Object(O.jsx)(i.a.Group,{controlId:"postTitle",children:Object(O.jsx)(i.a.Control,{type:"text",placeholder:"Add Title",required:!0,value:L,name:"postTitle",onChange:function(e){return E(e.target.value)}})})}),Object(O.jsx)(o.a,{children:Object(O.jsx)(i.a.Group,{controlId:"postType",children:Object(O.jsxs)(i.a.Select,{onChange:function(e){return G(e.target.value)},required:!0,value:F,name:"postType",children:[Object(O.jsx)("option",{value:"",children:"Select Post Type"}),Object(O.jsx)("option",{value:"news",children:"News"}),Object(O.jsx)("option",{value:"blog",children:"Blog"}),Object(O.jsx)("option",{value:"sport",children:"Sport"}),Object(O.jsx)("option",{value:"airProgramme",children:"Air Programme"})]})})})]}),"airProgramme"===F&&Object(O.jsxs)(d.a,{className:"mt-4",children:[Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.a.Group,{controlId:"programmeDate",className:"mb-3",children:[Object(O.jsx)(i.a.Label,{children:"Select Programme Date"}),Object(O.jsx)(h.a,{selected:Z,onChange:function(e){return $(e)},showTimeSelect:!0,name:"programmeDate",value:Z,timeIntervals:10,dateFormat:"Pp",className:"form-control"})]})}),Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.a.Group,{controlId:"audioLink",className:"mb-3",children:[Object(O.jsx)(i.a.Label,{children:"Audio Link"}),Object(O.jsx)(i.a.Control,{type:"text",placeholder:"https://streams.radiomast.io/...",required:!0,onChange:function(e){return Y(e.target.value)},value:W,name:"audioLink"})]})})]}),Object(O.jsxs)(d.a,{className:"my-3",children:[Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.a.Group,{controlId:"featuredImage",className:"mb-3",children:[Object(O.jsx)(i.a.Label,{children:"Featured Desc"}),Object(O.jsx)(i.a.Control,{type:"text",placeholder:"Post description",required:!0,value:K,name:"featuredDesc",onChange:function(e){return Q(e.target.value)}})]})}),Object(O.jsxs)(o.a,{children:[Object(O.jsxs)(i.a.Group,{controlId:"featuredImage",className:"mb-3",children:[Object(O.jsx)(i.a.Label,{children:"Featured Image"}),Object(O.jsx)(i.a.Control,{type:"file",name:"featuredImage",accept:"image/png,image/jpeg",onChange:function(e){return U(e.target.files[0])}})]}),_.length<1&&Object(O.jsx)(b.a,{variant:"danger",className:"m-1",children:"Choose featured Image"}),oe&&Object(O.jsx)(b.a,{variant:"danger",className:"my-2",children:"featured Image should be jpg, jpeg or png"})]})]}),Object(O.jsxs)(d.a,{className:"my-4",children:[Object(O.jsx)(r.a,{theme:"snow",placeholder:"Post Content... start writting",onChange:S,value:w,name:"postBody"}),w.length<=11&&Object(O.jsx)(b.a,{variant:"danger",className:"mx-2 mt-5",children:"Add text to post"})]}),Object(O.jsx)(j.a,{variant:"info",type:"submit",className:"text-white mt-5",children:D?Object(O.jsxs)("span",{children:[Object(O.jsx)(u.a,{as:"span",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),Object(O.jsx)("span",{className:"mx-1",children:"Creating..."})]}):Object(O.jsx)("span",{children:"Update Post"})})]})]})]})}}}]);
//# sourceMappingURL=20.5514d6c4.chunk.js.map