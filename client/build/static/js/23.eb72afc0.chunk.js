(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[23,25],{119:function(e,t,a){"use strict";var s=a(84),c=a.n(s),n=a(85),r=a(39),l=a(0),i=a(2),o=a(74),d=a(1),j=a(43);t.a=function(e){var t=e.userId,a=Object(i.f)(),s=Object(l.useState)(!1),u=Object(r.a)(s,2),b=u[0],h=u[1],O=function(){return h(!1)},x=function(){var e=Object(n.a)(c.a.mark((function e(){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.delete("/users/delete/".concat(t));case 2:(s=e.sent).data.status?document.cookie.split(";").forEach((function(e){"uid"===e.split("=")[0]&&(document.cookie="uid=;expires==Thu, 01 Jan 1970 00:00:00 GMT;path=/;",a.push("/df-login"))})):console.log(s.data),O();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsxs)(o.a,{show:b,onHide:O,children:[Object(d.jsx)(o.a.Header,{closeButton:!0,children:Object(d.jsx)(o.a.Title,{children:"Delete user"})}),Object(d.jsxs)(o.a.Body,{children:["Woohoo, are you're trying to delete user?",Object(d.jsxs)("div",{className:"d-flex flex-nowrap my-2",children:[Object(d.jsx)("button",{className:"btn btn-secondary me-2",onClick:O,children:"Not at all"}),Object(d.jsx)("button",{className:"btn btn-danger",onClick:x,children:"Yes, Delete user"})]})]})]}),Object(d.jsx)("button",{className:"btn btn-danger",onClick:function(){return h(!0)},children:"Delete Account"})]})}},216:function(e,t,a){"use strict";a.r(t);var s=a(84),c=a.n(s),n=a(85),r=a(39),l=a(0),i=a(41),o=a(51),d=a(46),j=a(44),u=a(17),b=a(52),h=a(45),O=a(19),x=a(119),m=a(1),p=a(43);t.default=function(e){var t=e.id,a=e.currentUserData,s="",f=Object(l.useState)(null),v=Object(r.a)(f,2),g=v[0],w=v[1],N=Object(l.useState)(null),y=Object(r.a)(N,2),S=y[0],C=y[1],k=Object(l.useState)(null),E=Object(r.a)(k,2),P=E[0],I=E[1],L=Object(l.useState)(null),D=Object(r.a)(L,2),G=D[0],U=D[1],A=Object(l.useState)(null),q=Object(r.a)(A,2),T=q[0],H=q[1],_=Object(l.useState)(null),F=Object(r.a)(_,2),J=F[0],R=F[1],z=Object(l.useState)(null),B=Object(r.a)(z,2),Y=B[0],M=B[1],W=Object(l.useState)(!1),K=Object(r.a)(W,2),Q=K[0],V=K[1],X=Object(l.useState)(!1),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(l.useState)(""),ae=Object(r.a)(te,2),se=ae[0],ce=ae[1],ne=Object(l.useState)(""),re=Object(r.a)(ne,2),le=re[0],ie=re[1],oe=Object(l.useState)(null),de=Object(r.a)(oe,2),je=de[0],ue=de[1],be=Object(l.useState)(!1),he=Object(r.a)(be,2),Oe=he[0],xe=he[1],me=Object(l.useState)(!1),pe=Object(r.a)(me,2),fe=pe[0],ve=pe[1];Object(l.useEffect)((function(){se===le&&ue(!1)}),[se,le]),t?s=t:document.cookie.split(";").forEach((function(e){var t=e.split("=");"uid"===t[0]&&(s=t[1])}));Object(l.useEffect)((function(){p.get("/users/".concat(s)).then((function(e){e.data.status?(w(e.data.user),C(e.data.user.firstname),I(e.data.user.lastname),U(e.data.user.email),H(e.data.user.role),R(e.data.user.avatar),M(e.data.user.canPublish)):console.log(e)})).catch((function(e){console.log(e)}))}),[s,$,a]);var ge=function(e){p.post("/users/account/update",e).then((function(e){e.data.status?ee(!0):console.log(e)}))},we=function(){var e=Object(n.a)(c.a.mark((function e(t){var a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),V(!0),a={id:g._id,firstname:S,lastname:P,email:G,role:T,avatar:J,canPublish:Y},s=new FileReader,"string"===typeof J){e.next=9;break}s.addEventListener("load",Object(n.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.avatar=s.result,e.next=3,ge(a);case 3:V(!1);case 4:case"end":return e.stop()}}),e)})))),s.readAsDataURL(J),e.next=12;break;case 9:return e.next=11,ge(a);case 11:V(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{children:g?Object(m.jsxs)("div",{children:[Object(m.jsxs)("section",{style:{minHeight:"80px"},className:"bg-white px-4 py-5 me-md-2 my-3 rounded-3 shadow",children:[$&&Object(m.jsx)(h.a,{variant:"success",children:"Account Updated"}),Object(m.jsx)("h4",{children:"Profile"}),Object(m.jsxs)("div",{className:"d-flex flex-nowrap align-items-center mt-4",children:[Object(m.jsx)(i.a,{height:"180",width:"171",className:"me-3",src:"null"!==g.avatar?g.avatar:"/media/userProfile.svg",rounded:!0}),Object(m.jsxs)("section",{children:[Object(m.jsx)("h5",{className:"text-secondary",children:g.role}),Object(m.jsx)("h3",{children:g.firstname+" "+g.lastname}),Object(m.jsx)("p",{className:"text-secondary mb-2",children:g.email}),Object(m.jsx)(x.a,{userId:g._id})]})]}),Object(m.jsxs)(o.a,{className:"mt-5",onSubmit:we,children:[Object(m.jsx)("h4",{children:"Update Details"}),Object(m.jsxs)(d.a,{className:"my-3",children:[Object(m.jsx)(j.a,{children:Object(m.jsxs)(o.a.Group,{controlId:"firstname",children:[Object(m.jsx)(o.a.Label,{children:"First Name"}),Object(m.jsx)(o.a.Control,{type:"text",placeholder:"Firstname",value:S,required:!0,onChange:function(e){return C(e.target.value)}})]})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(o.a.Group,{controlId:"lastname",children:[Object(m.jsx)(o.a.Label,{children:"Last Name"}),Object(m.jsx)(o.a.Control,{type:"text",placeholder:"Lastname",value:P,required:!0,onChange:function(e){return I(e.target.value)}})]})})]}),Object(m.jsxs)(d.a,{className:"mb-3",children:[Object(m.jsx)(j.a,{children:Object(m.jsxs)(o.a.Group,{controlId:"email",children:[Object(m.jsx)(o.a.Label,{children:"Email Address"}),Object(m.jsx)(o.a.Control,{type:"email",placeholder:"Email address",value:G,required:!0,onChange:function(e){return U(e.target.value)}})]})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(o.a.Group,{controlId:"role",children:[Object(m.jsx)(o.a.Label,{children:"Role"}),Object(m.jsxs)(o.a.Select,{onChange:function(e){return H(e.target.value)},value:T,required:!0,children:[Object(m.jsx)("option",{value:"",children:"Select"}),Object(m.jsx)("option",{value:"editor",children:"Editor"}),Object(m.jsx)("option",{value:"admin",children:"Admin"})]}),""===T&&Object(m.jsx)(o.a.Text,{className:"text-danger",children:"Select a role! Editor or Admin"})]})})]}),Object(m.jsxs)(d.a,{className:"mb-3",children:[Object(m.jsx)(j.a,{children:Object(m.jsxs)(o.a.Group,{controlId:"avatar",children:[Object(m.jsx)(o.a.Label,{children:"Profile picture"}),Object(m.jsx)(o.a.Control,{type:"file",accept:".png, .jpg, jpeg",name:"avatar",onChange:function(e){return R(e.target.files[0])}})]})}),Object(m.jsx)(j.a,{children:Object(m.jsxs)(o.a.Group,{controlId:"role",children:[Object(m.jsx)(o.a.Label,{children:"Can Publish"}),Object(m.jsxs)(o.a.Select,{onChange:function(e){return M(e.target.value)},value:Y,required:!0,disabled:(!a||"admin"!==a.role)&&(!T||"admin"!==T),children:[Object(m.jsx)("option",{value:"",children:"Select"}),Object(m.jsx)("option",{value:!0,children:"Yes"}),Object(m.jsx)("option",{value:!1,children:"No"})]}),""===Y&&Object(m.jsx)(o.a.Text,{className:"text-danger",children:"Select a role! Editor or Admin"})]})})]}),Object(m.jsxs)(d.a,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(b.a,{variant:"success",type:"submit",className:"text-white",children:Q?Object(m.jsxs)("span",{children:[Object(m.jsx)(u.a,{as:"span",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),Object(m.jsx)("span",{className:"mx-1",children:"Updating..."})]}):Object(m.jsx)("span",{children:"Update Account"})})}),Object(m.jsx)(j.a,{})]})]})]}),Object(m.jsxs)("section",{style:{minHeight:"80px"},className:"bg-white px-4 py-5 me-md-2 my-5 rounded-3 shadow",children:[fe&&Object(m.jsx)(h.a,{variant:"success",className:"my-4",children:"Password Updated"}),Object(m.jsx)("h4",{children:"Update Password"}),Object(m.jsxs)(o.a,{onSubmit:function(e){e.preventDefault(),xe(!0),se.length<8||se!==le?xe(!1):p.post("/users/reset-password/",{userId:s,password:se}).then((function(e){e.data.status?(ve(!0),xe(!1)):console.log(e)}))},children:[Object(m.jsxs)(d.a,{className:"mb-3",children:[Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(o.a.Group,{controlId:"password",children:[Object(m.jsx)(o.a.Label,{children:"New Password"}),Object(m.jsx)(o.a.Control,{type:"password",placeholder:"*******",value:se,required:!0,onChange:function(e){return ce(e.target.value)}})]}),""!==se&&se.length<8&&Object(m.jsx)(o.a.Text,{className:"text-danger",children:"Password should be at least 8 characters"})]}),Object(m.jsxs)(j.a,{children:[Object(m.jsxs)(o.a.Group,{controlId:"matchPassword",children:[Object(m.jsx)(o.a.Label,{children:"Confirm Password"}),Object(m.jsx)(o.a.Control,{type:"password",placeholder:"*******",value:le,required:!0,onChange:function(e){ie(e.target.value),ue(!0)}})]}),je&&Object(m.jsx)(o.a.Text,{className:"text-danger",children:"Should match your password"})]})]}),Object(m.jsxs)(d.a,{children:[Object(m.jsx)(j.a,{children:Object(m.jsx)(b.a,{variant:"success",type:"submit",className:"text-white",children:Oe?Object(m.jsxs)("span",{children:[Object(m.jsx)(u.a,{as:"span",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),Object(m.jsx)("span",{className:"mx-1",children:"Changing..."})]}):Object(m.jsx)("span",{children:"Change Password"})})}),Object(m.jsx)(j.a,{})]})]})]})]}):Object(m.jsx)(O.default,{})})}},426:function(e,t,a){"use strict";a.r(t);var s=a(39),c=a(0),n=a(19),r=a(41),l=a(119),i=a(216),o=a(1),d=a(43);t.default=function(){var e="",t=Object(c.useState)(null),a=Object(s.a)(t,2),j=a[0],u=a[1];document.cookie.split(";").forEach((function(t){var a=t.split("=");"uid"===a[0]&&(e=a[1])})),Object(c.useEffect)((function(){d.get("/users/".concat(e)).then((function(e){e.data.status?u(e.data.user):console.log(e.data)})).catch((function(e){console.log(e)}))}),[e]);var b=Object(c.useState)(null),h=Object(s.a)(b,2),O=h[0],x=h[1],m=Object(c.useState)(null),p=Object(s.a)(m,2),f=p[0],v=p[1];return Object(c.useEffect)((function(){d.get("/users").then((function(e){e.data.status?x(e.data.users):console.log(e)}))}),[]),Object(o.jsx)("div",{className:"mt-2",children:O&&!f?Object(o.jsx)("div",{className:"d-flex ",children:O.map((function(e,t){return Object(o.jsxs)("section",{className:"bg-white px-4 py-5 me-md-2 me-lg-4 my-3 rounded-3 shadow flex-grow-1 d-flex flex-column justify-content-center align-items-center",children:[Object(o.jsx)(r.a,{height:"150",width:"150",className:"me-3",src:"null"!==e.avatar?e.avatar:"/media/userProfile.svg",roundedCircle:!0}),Object(o.jsx)("h4",{className:"mt-4 mb-0",children:e.firstname+" "+e.lastname}),Object(o.jsx)("p",{className:"text-secondary",children:e.role}),Object(o.jsxs)("div",{className:"d-flex",children:[Object(o.jsx)("button",{className:"btn btn-outline-secondary me-md-3",onClick:function(){return v(e._id)},children:"Edit"}),Object(o.jsx)(l.a,{userId:e._id})]})]},t)}))}):f?Object(o.jsx)(i.default,{id:f,currentUserData:j}):Object(o.jsx)(n.default,{})})}}}]);
//# sourceMappingURL=23.eb72afc0.chunk.js.map