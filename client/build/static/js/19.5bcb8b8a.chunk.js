(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[19,25,27],{193:function(e,t,c){"use strict";c.r(t);var s=c(39),a=c(0),n=c(41),r=c(45),l=c(74),i=c(52),d=c(18),o=c(81),j=c(1),b=c(43);t.default=function(e){var t=e.postLimit,c=Object(a.useState)(null),u=Object(s.a)(c,2),h=u[0],m=u[1],O=Object(a.useState)(null),x=Object(s.a)(O,2),p=x[0],f=x[1],g=Object(a.useState)(!1),N=Object(s.a)(g,2),y=N[0],v=N[1],w=Object(a.useState)(!1),S=Object(s.a)(w,2),P=S[0],C=S[1],D=Object(a.useState)(""),k=Object(s.a)(D,2),I=k[0],T=k[1],E=function(){return C(!1)},L=Object(a.useState)(null),A=Object(s.a)(L,2),B=A[0],F=A[1];return Object(a.useEffect)((function(){b.get("/posts").then((function(e){e.data?e.data.status?m(t?e.data.posts.reverse().filter((function(e){return"airProgramme"!==e.type})).slice(0,t):e.data.posts.reverse().filter((function(e){return"airProgramme"!==e.type}))):f("No post created yet... Add new"):f("Error getting posts")}))}),[t]),Object(j.jsxs)("div",{children:[Object(j.jsxs)(l.a,{show:P,onHide:E,children:[Object(j.jsx)(l.a.Header,{closeButton:!0,children:Object(j.jsx)(l.a.Title,{children:"Delete Post"})}),Object(j.jsx)(l.a.Body,{children:"Woohoo, Do you want to delete post?"}),Object(j.jsxs)(l.a.Footer,{children:[Object(j.jsx)(i.a,{variant:"secondary",onClick:E,children:"Not at all"}),Object(j.jsx)(i.a,{variant:"danger",onClick:function(){return e=I,v(!0),b.delete("/posts/".concat(e)).then((function(e){b.get("/posts").then((function(e){e.data?e.data.status?(v(!1),m(t?e.data.posts.reverse().filter((function(e){return"airProgramme"!==e.type})).slice(0,t):e.data.posts.reverse().filter((function(e){return"airProgramme"!==e.type})))):f("No post created yet... Add new"):f("Error getting posts")}))})).catch((function(e){return console.log(e)})),void E();var e},children:"Yes, delete post"})]})]}),h&&!B?Object(j.jsxs)("section",{style:{minHeight:"80px"},className:"bg-white px-3 py-4 me-md-2 my-3 rounded-3 shadow",children:[Object(j.jsx)("h4",{children:"Recent Posts"}),y&&Object(j.jsx)(d.default,{}),Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"No"}),Object(j.jsx)("th",{children:"Post Title"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"Type"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"Date"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:Object(j.jsx)("i",{className:"bi bi-chat-left-text me-2 fw-bolder h4"})}),Object(j.jsx)("th",{children:"Edit"})]})}),Object(j.jsx)("tbody",{children:h.map((function(e,t){return Object(j.jsxs)("tr",{className:"my-5",children:[Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("span",{className:"px-3 py-1 bg-info rounded text-white",children:t+1})}),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)(n.a,{src:e.featuredImage,rounded:!0,width:"80px",height:"70px",className:"d-none d-md-block"}),Object(j.jsxs)("section",{className:"ms-2",children:[Object(j.jsx)("p",{className:"fw-bold mb-0",children:e.title.slice(0,20)+"..."}),Object(j.jsx)("p",{className:"mb-0",children:e.featuredDesc.slice(0,40)+"..."})]})]})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.type})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.createdAt.split("T")[0]})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.comments.length})}),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"d-flex flex-nowrap align-items-center justify-content-center",children:[Object(j.jsx)("i",{className:"bi bi-pencil-square fw-bolder h5",style:{cursor:"pointer"},onClick:function(){!function(e){F(e)}(e)}}),Object(j.jsx)("span",{style:{backgroundColor:"#FB9195",cursor:"pointer"},className:"rounded ms-1 p-1",children:Object(j.jsx)("i",{className:"bi bi-trash fw-bolder text-white h5",onClick:function(){T(e._id),C(!0)}})})]})})]},e._id)}))})]})]}):p?Object(j.jsx)(r.a,{variant:"warning",children:p}):B?Object(j.jsx)(o.a,{post:B}):Object(j.jsx)(d.default,{})]})}},224:function(e,t,c){"use strict";c.r(t);var s=c(39),a=c(0),n=c(41),r=c(45),l=c(74),i=c(52),d=c(18),o=c(81),j=c(1),b=c(43);t.default=function(e){var t=e.postLimit,c=Object(a.useState)(null),u=Object(s.a)(c,2),h=u[0],m=u[1],O=Object(a.useState)(null),x=Object(s.a)(O,2),p=x[0],f=x[1],g=Object(a.useState)(!1),N=Object(s.a)(g,2),y=N[0],v=N[1],w=Object(a.useState)(!1),S=Object(s.a)(w,2),P=S[0],C=S[1],D=Object(a.useState)(""),k=Object(s.a)(D,2),I=k[0],T=k[1],E=function(){return C(!1)},L=Object(a.useState)(null),A=Object(s.a)(L,2),B=A[0],F=A[1];return Object(a.useEffect)((function(){b.get("/posts").then((function(e){e.data?e.data.status?m(t?e.data.posts.reverse().filter((function(e){return"airProgramme"===e.type})).slice(0,t):e.data.posts.reverse().filter((function(e){return"airProgramme"===e.type}))):f("No post created yet... Add new"):f("Error getting posts")}))}),[t]),Object(j.jsxs)("div",{children:[Object(j.jsxs)(l.a,{show:P,onHide:E,children:[Object(j.jsx)(l.a.Header,{closeButton:!0,children:Object(j.jsx)(l.a.Title,{children:"Delete Programme"})}),Object(j.jsx)(l.a.Body,{children:"Woohoo, Do you want to delete programme?"}),Object(j.jsxs)(l.a.Footer,{children:[Object(j.jsx)(i.a,{variant:"secondary",onClick:E,children:"Not at all"}),Object(j.jsx)(i.a,{variant:"danger",onClick:function(){return e=I,v(!0),b.delete("/posts/".concat(e)).then((function(e){b.get("/posts").then((function(e){e.data?e.data.status?(v(!1),m(t?e.data.posts.reverse().filter((function(e){return"airProgramme"===e.type})).slice(0,t):e.data.posts.reverse().filter((function(e){return"airProgramme"===e.type})))):f("No post created yet... Add new"):f("Error getting posts")}))})).catch((function(e){return console.log(e)})),void E();var e},children:"Yes, delete post"})]})]}),h&&!B?Object(j.jsxs)("section",{style:{minHeight:"80px"},className:"bg-white px-3 py-4 me-md-2 my-3 rounded-3 shadow",children:[Object(j.jsx)("h4",{children:"Recent Programme"}),y&&Object(j.jsx)(d.default,{}),Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"No"}),Object(j.jsx)("th",{children:"Programme Title"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"Time"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:"Date"}),Object(j.jsx)("th",{className:"d-none d-md-table-cell",children:Object(j.jsx)("i",{className:"bi bi-chat-left-text me-2 fw-bolder h4"})}),Object(j.jsx)("th",{children:"Edit"})]})}),Object(j.jsx)("tbody",{children:h.map((function(e,t){return Object(j.jsxs)("tr",{className:"my-5",children:[Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("span",{className:"px-3 py-1 rounded text-white",style:{backgroundColor:"#003A70"},children:t+1})}),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)(n.a,{src:e.featuredImage,rounded:!0,width:"80px",height:"70px",className:"d-none d-md-block"}),Object(j.jsxs)("section",{className:"ms-2",children:[Object(j.jsx)("p",{className:"fw-bold mb-0",children:e.title.slice(0,20)+"..."}),Object(j.jsx)("p",{className:"mb-0",children:e.featuredDesc.slice(0,40)+"..."})]})]})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:new Date(e.programmeDate).toLocaleTimeString("en-US")})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.programmeDate.split("T")[0]})}),Object(j.jsx)("td",{className:"d-none d-md-table-cell",children:Object(j.jsx)("p",{children:e.comments.length})}),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"d-flex flex-nowrap align-items-center justify-content-center",children:[Object(j.jsx)("i",{className:"bi bi-pencil-square fw-bolder h5",style:{cursor:"pointer"},onClick:function(){!function(e){F(e)}(e)}}),Object(j.jsx)("span",{style:{backgroundColor:"#FB9195",cursor:"pointer"},className:"rounded ms-1 p-1",children:Object(j.jsx)("i",{className:"bi bi-trash fw-bolder text-white h5",onClick:function(){T(e._id),C(!0)}})})]})})]},e._id)}))})]})]}):p?Object(j.jsx)(r.a,{variant:"warning",children:p}):B?Object(j.jsx)(o.a,{post:B}):Object(j.jsx)(d.default,{})]})}},435:function(e,t,c){"use strict";c.r(t);var s=c(224),a=c(193),n=c(1);t.default=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(a.default,{postLimit:4}),Object(n.jsx)(s.default,{postLimit:2})]})}},81:function(e,t,c){"use strict";var s=c(70),a=c(39),n=c(109),r=c.n(n),l=(c(119),c(0)),i=c(51),d=c(46),o=c(44),j=c(52),b=c(45),u=c(19),h=c(121),m=c.n(h),O=(c(120),c(1)),x=c(43);t.a=function(e){var t=e.post,c="";document.cookie.split(";").forEach((function(e){var t=e.split("=");"uid"===t[0]&&(c=t[1])}));var n=Object(l.useState)(null),h=Object(a.a)(n,2),p=h[0],f=h[1];Object(l.useEffect)((function(){x.get("/users/".concat(c)).then((function(e){f((function(){return e.data.user}))}))}),[c]);var g=Object(l.useState)(t.createdBy),N=Object(a.a)(g,1)[0],y=Object(l.useState)(t.body),v=Object(a.a)(y,2),w=v[0],S=v[1],P=Object(l.useState)(!1),C=Object(a.a)(P,2),D=C[0],k=C[1],I=Object(l.useState)(t.title),T=Object(a.a)(I,2),E=T[0],L=T[1],A=Object(l.useState)(t.type),B=Object(a.a)(A,2),F=B[0],H=B[1],q=Object(l.useState)(t.featuredImage),G=Object(a.a)(q,2),_=G[0],R=G[1],U=Object(l.useState)(t.audio),J=Object(a.a)(U,2),W=J[0],Y=J[1],z=Object(l.useState)(t.featuredDesc),K=Object(a.a)(z,2),M=K[0],Q=K[1],V=Object(l.useState)(new Date(t.programmeDate)),X=Object(a.a)(V,2),Z=X[0],$=X[1],ee=Object(l.useState)(null),te=Object(a.a)(ee,2),ce=te[0],se=te[1],ae=Object(l.useState)(!1),ne=Object(a.a)(ae,2),re=ne[0],le=ne[1];return Object(l.useEffect)((function(){p&&p&&!p.canPublish&&re&&x.get("/users/").then((function(e){e.data.users.filter((function(e){return"admin"===e.role})).forEach((function(e){var t={id:e._id,notifications:[].concat(Object(s.a)(e.notifications),[{type:"Pending post updated",body:M.slice(0,25)}])};x.post("/users/notify",t).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)}))}))})).catch((function(e){console.log(e)}))}),[p,M,re]),Object(O.jsxs)("div",{className:"bg-white px-1 py-4 me-md-2 my-4",children:[t.suggestion&&Object(O.jsxs)(b.a,{variant:"warning",children:[Object(O.jsx)(b.a.Heading,{children:"Changes suggested by admin"}),t.suggestion]}),re&&!ce&&Object(O.jsx)(b.a,{variant:"success",className:"my-2",children:"Post updated successfully"}),ce&&!re&&Object(O.jsx)(b.a,{variant:"danger",className:"my-2",children:ce}),!re&&Object(O.jsxs)("div",{children:[Object(O.jsx)("h4",{className:"mb-4",children:"Update Post"}),Object(O.jsxs)(i.a,{onSubmit:function(e){e.preventDefault(),k(!0);var c=new FileReader,s={id:t._id,title:E,type:F,body:w,audio:""!==W?W:null,createdBy:N,featuredDesc:M,programmeDate:""!==Z?Z:null,pending:p.canPublish};"string"!==typeof _?(c.addEventListener("load",(function(){s.featuredImage=c.result,x.post("/posts/update",s).then((function(e){e.data&&e.data.status?le(!0):se("Oops.. error updating post")})).catch((function(e){console.log(e)}))})),c.readAsDataURL(_),k(!1)):(s.featuredImage=_,x.post("/posts/update",s).then((function(e){e.data&&e.data.status?le(!0):se("Oops.. error updating post")})).catch((function(e){console.log(e)})),k(!1))},children:[Object(O.jsxs)(d.a,{children:[Object(O.jsx)(o.a,{xs:8,children:Object(O.jsx)(i.a.Group,{controlId:"postTitle",children:Object(O.jsx)(i.a.Control,{type:"text",placeholder:"Add Title",required:!0,value:E,onChange:function(e){return L(e.target.value)}})})}),Object(O.jsx)(o.a,{children:Object(O.jsx)(i.a.Group,{controlId:"postType",children:Object(O.jsxs)(i.a.Select,{onChange:function(e){return H(e.target.value)},required:!0,value:F,children:[Object(O.jsx)("option",{value:"",children:"Select Post Type"}),Object(O.jsx)("option",{value:"news",children:"News"}),Object(O.jsx)("option",{value:"blog",children:"Blog"}),Object(O.jsx)("option",{value:"sport",children:"Sport"}),Object(O.jsx)("option",{value:"airProgramme",children:"Air Programme"})]})})})]}),"airProgramme"===F&&Object(O.jsxs)(d.a,{className:"mt-4",children:[Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.a.Group,{controlId:"programmeDate",className:"mb-3",children:[Object(O.jsx)(i.a.Label,{children:"Select Programme Date"}),Object(O.jsx)(m.a,{selected:Z,onChange:function(e){return $(e)},showTimeSelect:!0,value:Z,timeIntervals:10,dateFormat:"Pp",className:"form-control"})]})}),Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.a.Group,{controlId:"audioLink",className:"mb-3",children:[Object(O.jsx)(i.a.Label,{children:"Audio Link"}),Object(O.jsx)(i.a.Control,{type:"text",placeholder:"https://streams.radiomast.io/...",required:!0,onChange:function(e){return Y(e.target.value)},value:W})]})})]}),Object(O.jsxs)(d.a,{className:"my-3",children:[Object(O.jsx)(o.a,{children:Object(O.jsxs)(i.a.Group,{controlId:"featuredImage",className:"mb-3",children:[Object(O.jsx)(i.a.Label,{children:"Featured Desc"}),Object(O.jsx)(i.a.Control,{type:"text",placeholder:"Post description",required:!0,value:M,onChange:function(e){return Q(e.target.value)}})]})}),Object(O.jsxs)(o.a,{children:[Object(O.jsxs)(i.a.Group,{controlId:"featuredImage",className:"mb-3",children:[Object(O.jsx)(i.a.Label,{children:"Featured Image"}),Object(O.jsx)(i.a.Control,{type:"file",onChange:function(e){return R(e.target.files[0])}})]}),_.length<1&&Object(O.jsx)(b.a,{variant:"danger",className:"m-1",children:"Choose featured Image"})]})]}),Object(O.jsxs)(d.a,{className:"my-4",children:[Object(O.jsx)(r.a,{theme:"snow",placeholder:"Post Content... start writting",onChange:S,value:w}),w.length<=11&&Object(O.jsx)(b.a,{variant:"danger",className:"mx-2 mt-5",children:"Add text to post"})]}),Object(O.jsx)(j.a,{variant:"info",type:"submit",className:"text-white mt-5",children:D?Object(O.jsxs)("span",{children:[Object(O.jsx)(u.a,{as:"span",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),Object(O.jsx)("span",{className:"mx-1",children:"Creating..."})]}):Object(O.jsx)("span",{children:"Update Post"})})]})]})]})}}}]);
//# sourceMappingURL=19.5bcb8b8a.chunk.js.map