(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[26],{122:function(e,t,a){"use strict";var s=a(84),c=a.n(s),n=a(85),r=a(39),l=a(0),i=a(2),j=a(74),o=a(1),d=a(43);t.a=function(e){var t=e.userId,a=Object(i.f)(),s=Object(l.useState)(!1),u=Object(r.a)(s,2),b=u[0],h=u[1],O=function(){return h(!1)},x=function(){var e=Object(n.a)(c.a.mark((function e(){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.delete("/users/delete/".concat(t));case 2:(s=e.sent).data.status?document.cookie.split(";").forEach((function(e){"uid"===e.split("=")[0]&&(document.cookie="uid=;expires==Thu, 01 Jan 1970 00:00:00 GMT;path=/;",a.push("/df-login"))})):console.log(s.data),O();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{children:[Object(o.jsxs)(j.a,{show:b,onHide:O,children:[Object(o.jsx)(j.a.Header,{closeButton:!0,children:Object(o.jsx)(j.a.Title,{children:"Delete user"})}),Object(o.jsxs)(j.a.Body,{children:["Woohoo, are you're trying to delete user?",Object(o.jsxs)("div",{className:"d-flex flex-nowrap my-2",children:[Object(o.jsx)("button",{className:"btn btn-secondary me-2",onClick:O,children:"Not at all"}),Object(o.jsx)("button",{className:"btn btn-danger",onClick:x,children:"Yes, Delete user"})]})]})]}),Object(o.jsx)("button",{className:"btn btn-danger",onClick:function(){return h(!0)},children:"Delete Account"})]})}},219:function(e,t,a){"use strict";a.r(t);var s=a(84),c=a.n(s),n=a(85),r=a(39),l=a(0),i=a(41),j=a(51),o=a(46),d=a(44),u=a(19),b=a(52),h=a(45),O=a(18),x=a(122),p=a(1),m=a(43);t.default=function(e){var t=e.id,a=e.currentUserData,s="",f=Object(l.useState)(null),v=Object(r.a)(f,2),g=v[0],w=v[1],N=Object(l.useState)(null),y=Object(r.a)(N,2),S=y[0],C=y[1],k=Object(l.useState)(null),P=Object(r.a)(k,2),L=P[0],I=P[1],E=Object(l.useState)(null),G=Object(r.a)(E,2),A=G[0],D=G[1],U=Object(l.useState)(null),q=Object(r.a)(U,2),T=q[0],H=q[1],F=Object(l.useState)(null),J=Object(r.a)(F,2),R=J[0],z=J[1],B=Object(l.useState)(null),Y=Object(r.a)(B,2),_=Y[0],M=Y[1],W=Object(l.useState)(!1),K=Object(r.a)(W,2),Q=K[0],V=K[1],X=Object(l.useState)(!1),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(l.useState)(""),ae=Object(r.a)(te,2),se=ae[0],ce=ae[1],ne=Object(l.useState)(""),re=Object(r.a)(ne,2),le=re[0],ie=re[1],je=Object(l.useState)(null),oe=Object(r.a)(je,2),de=oe[0],ue=oe[1],be=Object(l.useState)(!1),he=Object(r.a)(be,2),Oe=he[0],xe=he[1],pe=Object(l.useState)(!1),me=Object(r.a)(pe,2),fe=me[0],ve=me[1];Object(l.useEffect)((function(){se===le&&ue(!1)}),[se,le]),t?s=t:document.cookie.split(";").forEach((function(e){var t=e.split("=");"uid"===t[0]&&(s=t[1])}));Object(l.useEffect)((function(){m.get("/users/".concat(s)).then((function(e){e.data.status?(w(e.data.user),C(e.data.user.firstname),I(e.data.user.lastname),D(e.data.user.email),H(e.data.user.role),z(e.data.user.avatar),M(e.data.user.canPublish)):console.log(e)})).catch((function(e){console.log(e)}))}),[s,$,a]);var ge=function(e){m.post("/users/account/update",e).then((function(e){e.data.status?ee(!0):console.log(e)}))},we=function(){var e=Object(n.a)(c.a.mark((function e(t){var a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),V(!0),a={id:g._id,firstname:S,lastname:L,email:A,role:T,avatar:R,canPublish:_},s=new FileReader,"string"===typeof R){e.next=9;break}s.addEventListener("load",Object(n.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.avatar=s.result,e.next=3,ge(a);case 3:V(!1);case 4:case"end":return e.stop()}}),e)})))),s.readAsDataURL(R),e.next=12;break;case 9:return e.next=11,ge(a);case 11:V(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{children:g?Object(p.jsxs)("div",{children:[Object(p.jsxs)("section",{style:{minHeight:"80px"},className:"bg-white px-4 py-5 me-md-2 my-3 rounded-3 shadow",children:[$&&Object(p.jsx)(h.a,{variant:"success",children:"Account Updated"}),Object(p.jsx)("h4",{children:"Profile"}),Object(p.jsxs)("div",{className:"d-flex flex-nowrap align-items-center mt-4",children:[Object(p.jsx)(i.a,{height:"180",width:"171",className:"me-3",src:"null"!==g.avatar?g.avatar:"/media/userProfile.svg",rounded:!0}),Object(p.jsxs)("section",{children:[Object(p.jsx)("h5",{className:"text-secondary",children:g.role}),Object(p.jsx)("h3",{children:g.firstname+" "+g.lastname}),Object(p.jsx)("p",{className:"text-secondary mb-2",children:g.email}),Object(p.jsx)(x.a,{userId:g._id})]})]}),Object(p.jsxs)(j.a,{className:"mt-5",onSubmit:we,children:[Object(p.jsx)("h4",{children:"Update Details"}),Object(p.jsxs)(o.a,{className:"my-3",children:[Object(p.jsx)(d.a,{children:Object(p.jsxs)(j.a.Group,{controlId:"firstname",children:[Object(p.jsx)(j.a.Label,{children:"First Name"}),Object(p.jsx)(j.a.Control,{type:"text",placeholder:"Firstname",value:S,required:!0,onChange:function(e){return C(e.target.value)}})]})}),Object(p.jsx)(d.a,{children:Object(p.jsxs)(j.a.Group,{controlId:"lastname",children:[Object(p.jsx)(j.a.Label,{children:"Last Name"}),Object(p.jsx)(j.a.Control,{type:"text",placeholder:"Lastname",value:L,required:!0,onChange:function(e){return I(e.target.value)}})]})})]}),Object(p.jsxs)(o.a,{className:"mb-3",children:[Object(p.jsx)(d.a,{children:Object(p.jsxs)(j.a.Group,{controlId:"email",children:[Object(p.jsx)(j.a.Label,{children:"Email Address"}),Object(p.jsx)(j.a.Control,{type:"email",placeholder:"Email address",value:A,required:!0,onChange:function(e){return D(e.target.value)}})]})}),Object(p.jsx)(d.a,{children:Object(p.jsxs)(j.a.Group,{controlId:"role",children:[Object(p.jsx)(j.a.Label,{children:"Role"}),Object(p.jsxs)(j.a.Select,{onChange:function(e){return H(e.target.value)},value:T,required:!0,children:[Object(p.jsx)("option",{value:"",children:"Select"}),Object(p.jsx)("option",{value:"editor",children:"Editor"}),Object(p.jsx)("option",{value:"admin",children:"Admin"})]}),""===T&&Object(p.jsx)(j.a.Text,{className:"text-danger",children:"Select a role! Editor or Admin"})]})})]}),Object(p.jsxs)(o.a,{className:"mb-3",children:[Object(p.jsx)(d.a,{children:Object(p.jsxs)(j.a.Group,{controlId:"avatar",children:[Object(p.jsx)(j.a.Label,{children:"Profile picture"}),Object(p.jsx)(j.a.Control,{type:"file",accept:".png, .jpg, jpeg",name:"avatar",onChange:function(e){return z(e.target.files[0])}})]})}),Object(p.jsx)(d.a,{children:Object(p.jsxs)(j.a.Group,{controlId:"role",children:[Object(p.jsx)(j.a.Label,{children:"Can Publish"}),Object(p.jsxs)(j.a.Select,{onChange:function(e){return M(e.target.value)},value:_,required:!0,disabled:(!a||"admin"!==a.role)&&(!T||"admin"!==T),children:[Object(p.jsx)("option",{value:"",children:"Select"}),Object(p.jsx)("option",{value:!0,children:"Yes"}),Object(p.jsx)("option",{value:!1,children:"No"})]}),""===_&&Object(p.jsx)(j.a.Text,{className:"text-danger",children:"Select a role! Editor or Admin"})]})})]}),Object(p.jsxs)(o.a,{children:[Object(p.jsx)(d.a,{children:Object(p.jsx)(b.a,{variant:"success",type:"submit",className:"text-white",children:Q?Object(p.jsxs)("span",{children:[Object(p.jsx)(u.a,{as:"span",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),Object(p.jsx)("span",{className:"mx-1",children:"Updating..."})]}):Object(p.jsx)("span",{children:"Update Account"})})}),Object(p.jsx)(d.a,{})]})]})]}),Object(p.jsxs)("section",{style:{minHeight:"80px"},className:"bg-white px-4 py-5 me-md-2 my-5 rounded-3 shadow",children:[fe&&Object(p.jsx)(h.a,{variant:"success",className:"my-4",children:"Password Updated"}),Object(p.jsx)("h4",{children:"Update Password"}),Object(p.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),xe(!0),se.length<8||se!==le?xe(!1):m.post("/users/reset-password/",{userId:s,password:se}).then((function(e){e.data.status?(ve(!0),xe(!1)):console.log(e)}))},children:[Object(p.jsxs)(o.a,{className:"mb-3",children:[Object(p.jsxs)(d.a,{children:[Object(p.jsxs)(j.a.Group,{controlId:"password",children:[Object(p.jsx)(j.a.Label,{children:"New Password"}),Object(p.jsx)(j.a.Control,{type:"password",placeholder:"*******",value:se,required:!0,onChange:function(e){return ce(e.target.value)}})]}),""!==se&&se.length<8&&Object(p.jsx)(j.a.Text,{className:"text-danger",children:"Password should be at least 8 characters"})]}),Object(p.jsxs)(d.a,{children:[Object(p.jsxs)(j.a.Group,{controlId:"matchPassword",children:[Object(p.jsx)(j.a.Label,{children:"Confirm Password"}),Object(p.jsx)(j.a.Control,{type:"password",placeholder:"*******",value:le,required:!0,onChange:function(e){ie(e.target.value),ue(!0)}})]}),de&&Object(p.jsx)(j.a.Text,{className:"text-danger",children:"Should match your password"})]})]}),Object(p.jsxs)(o.a,{children:[Object(p.jsx)(d.a,{children:Object(p.jsx)(b.a,{variant:"success",type:"submit",className:"text-white",children:Oe?Object(p.jsxs)("span",{children:[Object(p.jsx)(u.a,{as:"span",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),Object(p.jsx)("span",{className:"mx-1",children:"Changing..."})]}):Object(p.jsx)("span",{children:"Change Password"})})}),Object(p.jsx)(d.a,{})]})]})]})]}):Object(p.jsx)(O.default,{})})}}}]);
//# sourceMappingURL=26.7e9cc61f.chunk.js.map